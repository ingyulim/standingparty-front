<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë°© ì…ì¥ - Standing Party</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="room-container">
    <button class="btn-back" onclick="location.href='index.html'">â† ë‚˜ê°€ê¸°</button>

    <header class="room-header glass-card">
      <h1 id="roomTitle">Standing Party</h1>
      <p id="userInfo"></p>
    </header>

    <nav class="room-tabs glass-card">
      <button id="participantsTabBtn" class="tab-btn active" onclick="switchTab('participants')">
        ğŸ‘¥ ì°¸ì—¬ì (<span id="participantCount">0</span>)
      </button>
      <button id="missionsTabBtn" class="tab-btn" onclick="switchTab('missions')" style="display: none">
        ğŸ§© ë¯¸ì…˜ (<span id="missionCount">0</span>)
      </button>
      <button id="bingoTabBtn" class="tab-btn" onclick="switchTab('bingo')" style="display: none">
        ğŸ² ë¹™ê³ 
      </button>
    </nav>

    <section id="tab-participants" class="tab-content glass-card">
      <div id="participantList" class="list-box"></div>
    </section>

    <section id="tab-missions" class="tab-content glass-card hidden">
      <div class="my-points-section">
        <h3>ë‚´ í¬ì¸íŠ¸</h3>
        <div class="points-display" id="myPoints">0ì </div>
      </div>
      <div id="missionList" class="list-box"></div>
      <div class="mission-progress-section">
        <div class="progress-text" id="missionProgressText">0 / 0 ì™„ë£Œ</div>
        <div class="progress-bar">
          <div class="progress-fill" id="missionProgressFill"></div>
        </div>
      </div>
    </section>

    <section id="tab-bingo" class="tab-content glass-card hidden">
      <div id="bingoGrid" class="bingo-grid"></div>
    </section>
  </div>

  <!-- ë¯¸ì…˜ ì œì¶œ ëª¨ë‹¬ -->
  <div id="missionModal" class="modal-overlay" style="display: none !important;">
    <div class="modal-container">
      <div class="modal-header">
        <h3 id="missionModalTitle">ë¯¸ì…˜</h3>
        <button class="modal-close" onclick="closeMissionModal()">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="modal-question">
          <p id="missionModalDescription"></p>
        </div>
        <div class="modal-input-group">
          <label>ìƒëŒ€ë°© ì½”ë“œ</label>
          <input type="text" id="missionModalCode" placeholder="ìƒëŒ€ë°© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal-cancel" onclick="closeMissionModal()">ì·¨ì†Œ</button>
        <button class="btn-modal-submit" onclick="submitMissionAnswer()">ì œì¶œ</button>
      </div>
    </div>
  </div>

  <!-- ë¹™ê³  ë¯¸ì…˜ ì œì¶œ ëª¨ë‹¬ -->
  <div id="bingoModal" class="modal-overlay" style="display: none !important;">
    <div class="modal-container">
      <div class="modal-header">
        <h3 id="modalTitle">ë¯¸ì…˜</h3>
        <button class="modal-close" onclick="closeBingoModal()">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="modal-question">
          <p id="modalQuestion"></p>
        </div>
        <div class="modal-input-group">
          <label>ë‹µë³€</label>
          <textarea id="modalAnswer" placeholder="ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="4"></textarea>
        </div>
        <div class="modal-input-group">
          <label>
            <input type="checkbox" id="modalPhotoRequired" disabled /> ì‚¬ì§„ ì²¨ë¶€ í•„ìš”
          </label>
          <input type="file" id="modalPhoto" accept="image/*" style="display: none;" />
          <button id="photoUploadBtn" class="btn-photo-upload" style="display: none;">
            ğŸ“· ì‚¬ì§„ ì²¨ë¶€
          </button>
          <div id="photoPreview" style="display: none; margin-top: 8px;">
            <img id="photoPreviewImg" style="max-width: 100%; border-radius: 8px;" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal-cancel" onclick="closeBingoModal()">ì·¨ì†Œ</button>
        <button class="btn-modal-submit" onclick="submitBingoAnswer()">ì œì¶œ</button>
      </div>
    </div>
  </div>

  <script src="js/common.js"></script>
  <script>
    function showToast(message, type = 'success') {
      const existingToast = document.querySelector('.toast');
      if (existingToast) existingToast.remove();

      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 2000);
    }

    document.addEventListener("DOMContentLoaded", async () => {
      const params = new URLSearchParams(location.search);
      const roomId = params.get("roomId");
      const phone = params.get("phone");
      const code = params.get("code");
      const nickname = params.get("nickname");

      if (!roomId || !phone || !code || !nickname) {
        showToast("ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.", "error");
        setTimeout(() => location.href = "index.html", 1000);
        return;
      }

      document.getElementById("userInfo").textContent = `âœ… ${nickname} (#${code}) ë¡œ ì…ì¥`;
      window.currentUserCode = code;

      let missionActive = false;
      let bingoActive = false;
      try {
        const rooms = await callAPI("/rooms", "GET");
        const currentRoom = rooms.find(r => (r.id || r.roomId) === roomId);
        if (currentRoom) {
          document.getElementById("roomTitle").textContent = currentRoom.title || "Standing Party";
          missionActive = currentRoom.missionActive === true || currentRoom.missionActive === "true";
          bingoActive = currentRoom.bingoActive === true || currentRoom.bingoActive === "true";
        }
      } catch (e) {
        console.warn("ë°© ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨", e);
      }

      window.currentMissionActive = missionActive;
      window.currentBingoActive = bingoActive;

      if (missionActive) {
        document.getElementById("missionsTabBtn").style.display = "inline-block";
        loadMissions();
      } else {
        document.getElementById("missionsTabBtn").remove();
        document.getElementById("tab-missions").remove();
      }

      if (bingoActive) {
        document.getElementById("bingoTabBtn").style.display = "inline-block";
        loadBingo();
      } else {
        document.getElementById("bingoTabBtn").remove();
        document.getElementById("tab-bingo").remove();
      }

      loadParticipants();

      // ì „í™”ë²ˆí˜¸ë¥¼ ì‹œë“œë¡œ ì‚¬ìš©í•œ ì…”í”Œ í•¨ìˆ˜
      function shuffleWithSeed(array, seed) {
        const arr = [...array];
        
        // ì „í™”ë²ˆí˜¸ ë¬¸ìì—´ì„ í•´ì‹œê°’ìœ¼ë¡œ ë³€í™˜
        let hash = 0;
        for (let i = 0; i < seed.length; i++) {
          const char = seed.charCodeAt(i);
          hash = ((hash << 5) - hash) + char;
          hash = hash & 0xffffffff; // 32bit ì •ìˆ˜ë¡œ ë³€í™˜
        }
        hash = Math.abs(hash);
        
        // LCG (Linear Congruential Generator) ë°©ì‹
        let state = hash;
        const lcg = () => {
          state = (state * 1103515245 + 12345) & 0x7fffffff;
          return state / 0x7fffffff;
        };
        
        // Fisher-Yates ì…”í”Œ
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(lcg() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        
        return arr;
      }

      // ë¹™ê³  ë¡œë”© í•¨ìˆ˜ (ëœë¤ ë¯¸ì…˜ ìˆœì„œ ë°©ì‹)
      async function loadBingo() {
        try {
          // ì „ì—­ ë¹™ê³  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
          const bingoData = await callAPI("/bingo", "GET");
          const { title, description, grid } = bingoData;
          console.log("ğŸ² ë¹™ê³  ë°ì´í„°:", bingoData);
          
          // ë‚´ ë¹™ê³  ì™„ë£Œ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
          const myBingoData = await callAPI(`/bingo/my?roomId=${roomId}&phone=${phone}`, "GET");
          const completed = myBingoData.completed || [];
          console.log("âœ… ì™„ë£Œëœ ì¹¸:", completed);
          
          // ë¹™ê³ íŒì€ ëª¨ë‘ ë™ì¼í•˜ê²Œ ìœ ì§€
          const fixedGrid = grid;
          
          // ë¯¸ì…˜ê³¼ ìœ„ì¹˜ ë§¤í•‘ ìƒì„± (ë¯¸ì…˜ -> ë¹™ê³  ìœ„ì¹˜)
          const missionMap = [];
          for (let i = 0; i < fixedGrid.length; i++) {
            for (let j = 0; j < fixedGrid[i].length; j++) {
              missionMap.push({
                mission: fixedGrid[i][j],
                row: i,
                col: j,
                position: `${i}-${j}`
              });
            }
          }
          
          // ë¯¸ì…˜ ìˆœì„œë§Œ ì „í™”ë²ˆí˜¸ ê¸°ë°˜ìœ¼ë¡œ ì…”í”Œ
          const shuffledMissions = shuffleWithSeed(missionMap, phone);
          console.log("ğŸ”€ ì…”í”Œëœ ë¯¸ì…˜ ìˆœì„œ:", shuffledMissions);
          
          const bingoGridEl = document.getElementById("bingoGrid");
          bingoGridEl.innerHTML = `
            <h3>${title || 'ë¹™ê³ '}</h3>
            <p>${description || ''}</p>
            
            <!-- ë¹™ê³ íŒ (ëª¨ë“  ì°¸ì—¬ì ë™ì¼, ë¹ˆì¹¸ìœ¼ë¡œ í‘œì‹œ) -->
            <div class="bingo-table">
              ${fixedGrid.map((row, i) => `
                <div class="bingo-row">
                  ${row.map((cell, j) => {
                    const position = `${i}-${j}`;
                    const isCompleted = completed.includes(position);
                    return `
                      <div class="bingo-cell ${isCompleted ? 'completed' : 'locked'}">
                        ${isCompleted ? 'âœ…' : 'ğŸ”’'}
                      </div>
                    `;
                  }).join('')}
                </div>
              `).join('')}
            </div>
            
            <!-- ë¯¸ì…˜ ë¦¬ìŠ¤íŠ¸ (ì°¸ì—¬ìë§ˆë‹¤ ìˆœì„œ ë‹¤ë¦„) -->
            <div class="bingo-mission-list">
              <h4>ğŸ¯ ë¹™ê³  ë¯¸ì…˜</h4>
              ${shuffledMissions.map((item, index) => {
                const { mission, row, col, position } = item;
                const isCompleted = completed.includes(position);
                
                // missionì´ ê°ì²´ì¸ ê²½ìš° ì²˜ë¦¬
                let missionTitle, missionQuestion;
                if (typeof mission === 'object' && mission !== null) {
                  missionTitle = mission.title || '';
                  missionQuestion = mission.question || '';
                } else {
                  missionTitle = mission || '';
                  missionQuestion = '';
                }
                
                const escapedTitle = String(missionTitle).replace(/'/g, "\\'").replace(/"/g, '&quot;');
                const escapedQuestion = String(missionQuestion).replace(/'/g, "\\'").replace(/"/g, '&quot;');
                const displayText = missionQuestion ? `${missionTitle} - ${missionQuestion}` : missionTitle;
                
                return `
                  <div class="bingo-mission-item ${isCompleted ? 'completed' : ''}"
                    ${isCompleted ? '' : `onclick="completeBingoMission(${row}, ${col}, '${escapedTitle}', '${escapedQuestion}')" style="cursor: pointer;"`}>
                    <div class="mission-number">#${index + 1}</div>
                    <div class="mission-text">${missionTitle}</div>
                    <div class="check-mark">${isCompleted ? 'âœ…' : 'â­•'}</div>
                  </div>
                `;
              }).join('')}
            </div>
          `;
        } catch (err) {
          console.error("ë¹™ê³  ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
          document.getElementById("bingoGrid").innerHTML = "<p>ë¹™ê³ ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
        }
      }

      // ëª¨ë‹¬ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜
      let currentBingoMission = null;

      // ë¹™ê³  ë¯¸ì…˜ ëª¨ë‹¬ ì—´ê¸°
      window.completeBingoMission = (row, col, title, question, photoRequired = false) => {
        currentBingoMission = { row, col, title, question };
        
        document.getElementById('modalTitle').textContent = title;
        document.getElementById('modalQuestion').textContent = question || 'ë¯¸ì…˜ì„ ì™„ë£Œí•˜ì…¨ë‚˜ìš”?';
        document.getElementById('modalAnswer').value = '';
        document.getElementById('modalPhotoRequired').checked = photoRequired;
        document.getElementById('photoUploadBtn').style.display = photoRequired ? 'block' : 'none';
        document.getElementById('photoPreview').style.display = 'none';
        
        const modal = document.getElementById('bingoModal');
        modal.style.setProperty('display', 'flex', 'important');
      };

      // ëª¨ë‹¬ ë‹«ê¸°
      window.closeBingoModal = () => {
        const modal = document.getElementById('bingoModal');
        modal.style.setProperty('display', 'none', 'important');
        currentBingoMission = null;
      };

      // ì‚¬ì§„ ì²¨ë¶€ ë²„íŠ¼ í´ë¦­
      window.openPhotoUpload = () => {
        document.getElementById('modalPhoto').click();
      };

      // ì‚¬ì§„ ì„ íƒ ì‹œ ë¯¸ë¦¬ë³´ê¸°
      document.addEventListener('DOMContentLoaded', () => {
        const photoInput = document.getElementById('modalPhoto');
        if (photoInput) {
          photoInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = (event) => {
                document.getElementById('photoPreviewImg').src = event.target.result;
                document.getElementById('photoPreview').style.display = 'block';
              };
              reader.readAsDataURL(file);
            }
          });
        }
      });

      // ë¹™ê³  ë‹µë³€ ì œì¶œ
      window.submitBingoAnswer = async () => {
        if (!currentBingoMission) return;

        const answer = document.getElementById('modalAnswer').value.trim();
        if (!answer) {
          showToast("ë‹µë³€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”", "error");
          return;
        }

        const { row, col } = currentBingoMission;

        try {
          console.log("ğŸ¯ ë¹™ê³  ë¯¸ì…˜ ì œì¶œ:", { roomId, phone, row, col, answer });
          const result = await callAPI("/bingo/submit", "POST", { 
            roomId, 
            phone, 
            row,
            col,
            answer
          });
          console.log("âœ… ë¹™ê³  ì œì¶œ ì‘ë‹µ:", result);
          
          closeBingoModal();
          showToast("ë¹™ê³  ë¯¸ì…˜ ì™„ë£Œ! ì¹¸ì´ ì—´ë ¸ìŠµë‹ˆë‹¤ ğŸ‰", "success");
          loadBingo();
        } catch (err) {
          console.error("âŒ ë¹™ê³  ì œì¶œ ì‹¤íŒ¨:", err);
          showToast("ë¹™ê³  ì œì¶œ ì‹¤íŒ¨: " + err.message, "error");
        }
      };

      async function loadParticipants() {
        try {
          const data = await callAPI(`/participants?roomId=${roomId}`, "GET");
          const list = data?.participants || data || [];
          const div = document.getElementById("participantList");
          div.innerHTML = "";
          document.getElementById("participantCount").textContent = list.length;

          if (!Array.isArray(list) || list.length === 0) {
            div.innerHTML = "<p>ì°¸ì—¬ìê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
          }

          list.forEach((p) => {
            const name = p.nickname?.S || p.nickname || "ì´ë¦„ì—†ìŒ";
            const code = p.code?.S || p.code || "----";
            const pt = p.points?.N || p.points || "0";
            const gender = p.gender?.S || p.gender || "-";
            const genderIcon = gender === "M" ? "ğŸ‘¨" : gender === "F" ? "ğŸ‘©" : "ğŸ‘¤";
            const genderText = gender === "M" ? "ë‚¨ì" : gender === "F" ? "ì—¬ì" : "";
            const el = document.createElement("div");
            const genderClass = gender === "M" ? "participant-male" : gender === "F" ? "participant-female" : "";
            el.className = `card-item ${genderClass}`;
            const isMe = (code === window.currentUserCode);
            
            // ë³¸ì¸ì¸ ê²½ìš° ë¯¸ì…˜ íƒ­ì— ì ìˆ˜ í‘œì‹œ
            if (isMe) {
              const myPointsEl = document.getElementById('myPoints');
              if (myPointsEl) {
                myPointsEl.textContent = pt + 'ì ';
              }
            }
            
            // ë¯¸ì…˜ì´ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œë§Œ ë³¸ì¸ ì ìˆ˜ í‘œì‹œ
            const pointsDisplay = (isMe && window.currentMissionActive) ? `<strong style="color: #FFD700; font-size: 1.3em; font-weight: bold; text-shadow: 0 0 10px #FFD700;">${pt}ì </strong>` : "";

            el.innerHTML = `${genderIcon} ${name} (#${code}) Â· ${genderText}${pointsDisplay ? ` Â· ${pointsDisplay}` : ""}`;
            div.appendChild(el);
          });
        } catch (err) {
          console.error("ì°¸ì—¬ì ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
        }
      }

      async function loadMissions() {
        try {
          const data = await callAPI(`/missions/my?roomId=${roomId}&phone=${phone}`, "GET");
          console.log("ğŸ¯ ë¯¸ì…˜ ë°ì´í„°:", data);
          
          // dataê°€ ë°°ì—´ì¸ì§€ í™•ì¸í•˜ê³ , ì•„ë‹ˆë©´ ë°°ì—´ë¡œ ë³€í™˜
          const missions = Array.isArray(data) ? data : (data?.missions || []);
          console.log("ğŸ¯ íŒŒì‹±ëœ ë¯¸ì…˜:", missions);
          
          const missionList = document.getElementById("missionList");
          missionList.innerHTML = "";
          
          if (!Array.isArray(missions) || missions.length === 0) {
            missionList.innerHTML = "<p>ë“±ë¡ëœ ë¯¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
            document.getElementById("missionCount").textContent = "0";
            return;
          }

          document.getElementById("missionCount").textContent = missions.length;

          let completedCount = 0;
          missions.forEach((m, index) => {
            const isDone = m.done === true || m.completed === true || m.status === 'completed';
            if (isDone) completedCount++;

            const missionDiv = document.createElement("div");
            missionDiv.className = `bingo-mission-item ${isDone ? 'completed' : ''}`;
            
            missionDiv.innerHTML = `
              <div class="mission-number">#${index + 1}</div>
              <div class="mission-text">
                <div style="font-weight: bold;">${m.title}</div>
                <div style="font-size: 13px; color: #FFD700; margin-top: 4px;">${m.points >= 0 ? '+' : ''}${m.points}ì </div>
              </div>
              <div class="check-mark">${isDone ? 'âœ…' : 'â­•'}</div>
            `;
            
            // ë¯¸ì™„ë£Œ ë¯¸ì…˜ì€ í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡
            if (!isDone) {
              missionDiv.style.cursor = 'pointer';
              missionDiv.onclick = () => openMissionModal(m);
            }
            missionList.appendChild(missionDiv);
          });

          updateMissionProgress(completedCount, missions.length);
        } catch (err) {
          console.error("ë¯¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
          document.getElementById("missionList").innerHTML = "<p>ë¯¸ì…˜ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
        }
      }

      function updateMissionProgress(completed, total) {
        const progressText = document.getElementById("missionProgressText");
        const progressFill = document.getElementById("missionProgressFill");
        
        if (progressText) {
          progressText.textContent = `${completed} / ${total} ì™„ë£Œ`;
        }
        
        if (progressFill) {
          const percentage = total > 0 ? (completed / total) * 100 : 0;
          progressFill.style.width = `${percentage}%`;
        }
      }

      // ë¯¸ì…˜ ëª¨ë‹¬ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜
      let currentMission = null;

      // ë¯¸ì…˜ ëª¨ë‹¬ ì—´ê¸°
      window.openMissionModal = (mission) => {
        currentMission = mission;
        
        document.getElementById('missionModalTitle').textContent = mission.title;
        document.getElementById('missionModalDescription').textContent = mission.description || 'ìƒëŒ€ë°© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”';
        document.getElementById('missionModalCode').value = '';
        
        const modal = document.getElementById('missionModal');
        modal.style.setProperty('display', 'flex', 'important');
      };

      // ë¯¸ì…˜ ëª¨ë‹¬ ë‹«ê¸°
      window.closeMissionModal = () => {
        const modal = document.getElementById('missionModal');
        modal.style.setProperty('display', 'none', 'important');
        currentMission = null;
      };

      // ë¯¸ì…˜ ë‹µë³€ ì œì¶œ
      window.submitMissionAnswer = async () => {
        if (!currentMission) return;

        const codeInput = document.getElementById('missionModalCode').value.trim();
        if (!codeInput) {
          showToast("ìƒëŒ€ë°© ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”", "error");
          return;
        }

        try {
          // missionId ì•ì— mission- prefix ì¶”ê°€
          const missionIdWithPrefix = currentMission.id.startsWith('mission-') 
            ? currentMission.id 
            : `mission-${currentMission.id}`;
          
          const payload = { roomId, missionId: missionIdWithPrefix, phone, targetCode: codeInput };
          console.log("ğŸ¯ ë¯¸ì…˜ ì œì¶œ:", payload);
          const res = await callAPI("/missions/submit", "POST", payload);
          console.log("âœ… ë¯¸ì…˜ ì œì¶œ ì‘ë‹µ:", res);
          
          // ì¦‰ì‹œ í¬ì¸íŠ¸ ì—…ë°ì´íŠ¸ (ì„œë²„ ì¬ìš”ì²­ ì—†ì´)
          const myPointsEl = document.getElementById('myPoints');
          if (myPointsEl) {
            const currentPoints = parseInt(myPointsEl.textContent) || 0;
            const newPoints = currentPoints + (res.points || 0);
            myPointsEl.textContent = newPoints + 'ì ';
          }
          
          closeMissionModal();
          showToast("ë¯¸ì…˜ ì™„ë£Œ! " + (res.points >= 0 ? "+" : "") + res.points + "ì ", "success");
          loadMissions();
        } catch (err) {
          console.error("âŒ ë¯¸ì…˜ ì œì¶œ ì‹¤íŒ¨:", err);
          showToast(err.message || "ì œì¶œ ì‹¤íŒ¨", "error");
        }
      };
    });

    function switchTab(name) {
      document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("active"));
      document.querySelectorAll(".tab-content").forEach((el) => el.classList.add("hidden"));
      document.getElementById(`tab-${name}`).classList.remove("hidden");
      document.getElementById(`${name}TabBtn`).classList.add("active");
    }
  </script>
</body>
</html>
